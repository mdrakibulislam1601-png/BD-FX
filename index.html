<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS ASSETS | Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #020617; color: white; }
        .glass { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.05); }
        .pkg-card { background: #0f172a; border-radius: 1.5rem; border: 1px solid rgba(255,255,255,0.05); position: relative; overflow: hidden; }
        .active-badge { background: #22d3ee; color: #000; font-size: 7px; font-weight: 900; padding: 3px 10px; position: absolute; top: 10px; right: -15px; transform: rotate(45deg); width: 70px; text-align: center; }
        input { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.05); border-radius: 1rem; padding: 1rem; width: 100%; outline: none; }
        table { width: 100%; font-size: 10px; } th { color: #64748b; padding: 10px; text-align: left; border-bottom: 1px solid #1e293b; } td { padding: 10px; border-bottom: 1px solid #1e293b; }
    </style>
</head>
<body class="pb-24">
    <nav class="p-5 flex justify-between sticky top-0 z-50 glass">
        <div class="font-black italic text-cyan-400">NEXUS<span class="text-white">ASSETS</span></div>
        <div class="flex gap-2">
            <button id="admin-btn" onclick="toggleS('admin-panel')" class="hidden text-[9px] font-bold text-yellow-400 border border-yellow-400/20 px-3 py-1 rounded-full">ADMIN</button>
            <button id="login-nav" onclick="toggleM('modal')" class="text-[9px] font-bold text-cyan-400 border border-cyan-400/20 px-4 py-1 rounded-full">SIGN IN</button>
        </div>
    </nav>

    <div id="dashboard" class="hidden max-w-xl mx-auto p-5">
        <div class="bg-gradient-to-br from-cyan-600 to-blue-700 p-8 rounded-[2.5rem] mb-8">
            <p class="text-[10px] uppercase font-bold opacity-70">Balance</p>
            <h2 class="text-4xl font-black mb-6">৳<span id="user-balance">0</span></h2>
            <div class="flex gap-3"><button onclick="toggleM('deposit-modal')" class="flex-1 bg-white/10 py-3 rounded-xl text-[10px] font-bold">REFILL</button><button onclick="toggleM('withdraw-modal')" class="flex-1 bg-black/20 py-3 rounded-xl text-[10px] font-bold">PAYOUT</button></div>
        </div>

        <button id="claim-btn" onclick="claimProfit()" class="hidden w-full bg-cyan-600 p-5 rounded-3xl mb-8 flex justify-between items-center px-8">
            <div class="text-left"><p class="font-black text-xs">SYNC EARNINGS</p><p id="claim-timer" class="text-[8px] opacity-70">READY</p></div><i class="fa-solid fa-bolt"></i>
        </button>

        <div id="shop-list" class="grid grid-cols-2 gap-4 mb-8"></div>

        <div class="glass rounded-3xl overflow-hidden mb-8">
            <table><thead><tr><th>#</th><th>AMT</th><th>STATUS</th><th>DATE</th></tr></thead><tbody id="user-history-body"></tbody></table>
        </div>

        <div class="grid grid-cols-2 gap-3 mb-8">
            <a href="#" class="glass p-4 rounded-2xl flex items-center gap-2 text-[10px] font-bold"><img src="https://upload.wikimedia.org/wikipedia/commons/e/e8/Binance_Logo.png" class="w-4"> BINANCE</a>
            <a href="#" class="glass p-4 rounded-2xl flex items-center gap-2 text-[10px] font-bold"><img src="https://trustwallet.com/assets/images/media/assets/TWT.png" class="w-4"> TRUST WALLET</a>
        </div>

        <div class="glass p-6 rounded-[2rem] text-center">
            <div id="profile-email" class="text-[9px] text-gray-500 mb-4 font-bold italic"></div>
            <div class="flex justify-around text-xl">
                <a href="https://wa.me/8801405855309" class="text-green-500"><i class="fa-brands fa-whatsapp"></i></a>
                <a href="https://t.me/nexusassets" class="text-blue-400"><i class="fa-brands fa-telegram"></i></a>
                <a href="mailto:admin@bdfx.com" class="text-red-400"><i class="fa-solid fa-envelope"></i></a>
            </div>
        </div>
    </div>

    <div id="admin-panel" class="hidden p-5 max-w-xl mx-auto">
        <h3 class="text-yellow-400 font-black mb-5">ADMIN HUB</h3>
        <div id="adm-dep-list" class="space-y-2 mb-5"></div>
        <div id="adm-withdraw-list" class="space-y-2"></div>
    </div>

    <div id="modal" class="fixed inset-0 bg-black/95 flex items-center justify-center p-6 hidden z-[100]"><div class="glass p-8 rounded-[2.5rem] w-full max-w-xs text-center">
        <h2 id="at" class="text-xl font-black mb-6 text-cyan-400 uppercase">ACCESS</h2>
        <div id="rf" class="hidden mb-3"><input type="text" id="username" placeholder="Name"></div>
        <input type="email" id="email" placeholder="Email" class="mb-3">
        <input type="password" id="password" placeholder="Pass" class="mb-6">
        <button id="auth-btn" class="w-full bg-cyan-600 py-4 rounded-xl font-bold uppercase text-xs">Confirm</button>
        <p onclick="toggleR()" id="as" class="text-[9px] text-gray-500 mt-4 cursor-pointer">CREATE ACCOUNT</p>
    </div></div>

    <div id="deposit-modal" class="fixed inset-0 bg-black/95 flex items-center justify-center p-6 hidden z-[100]"><div class="glass p-8 rounded-[2.5rem] w-full max-w-xs text-center">
        <p class="text-[10px] mb-2">BKASH: 01405855309</p>
        <input id="dep-amt" type="number" placeholder="Amount" class="mb-3">
        <input id="dep-trx" placeholder="TRX ID" class="mb-6">
        <button onclick="subDep()" class="w-full bg-cyan-600 py-3 rounded-xl font-bold">SUBMIT</button>
    </div></div>

    <div id="withdraw-modal" class="fixed inset-0 bg-black/95 flex items-center justify-center p-6 hidden z-[100]"><div class="glass p-8 rounded-[2.5rem] w-full max-w-xs text-center">
        <input id="w-amt" type="number" placeholder="Amount" class="mb-3">
        <input id="w-num" placeholder="Bkash No" class="mb-6">
        <button onclick="subWdr()" class="w-full bg-blue-600 py-3 rounded-xl font-bold">WITHDRAW</button>
    </div></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, getDoc, updateDoc, setDoc, collection, addDoc, query, where, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

        const config = { apiKey: "AIzaSyCFpCE8khV-aedkVyGgrZY-yDXnHU9jhb4", authDomain: "bd-fx-app.firebaseapp.com", projectId: "bd-fx-app", storageBucket: "bd-fx-app.firebasestorage.app", messagingSenderId: "943565298325", appId: "1:943565298325:web:329b06cd41be53c3e2999c" };
        const app = initializeApp(config), auth = getAuth(app), db = getFirestore(app);

        window.toggleM = (id) => document.getElementById(id).classList.toggle('hidden');
        window.toggleS = (id) => { document.getElementById('dashboard').classList.add('hidden'); document.getElementById('admin-panel').classList.add('hidden'); document.getElementById(id).classList.remove('hidden'); };
        
        let isL = true;
        window.toggleR = () => { isL = !isL; document.getElementById('rf').classList.toggle('hidden'); document.getElementById('at').innerText = isL ? 'ACCESS' : 'JOIN'; };

        document.getElementById('auth-btn').onclick = async () => {
            const e = document.getElementById('email').value, p = document.getElementById('password').value, n = document.getElementById('username').value;
            if(isL) await signInWithEmailAndPassword(auth, e, p);
            else { const r = await createUserWithEmailAndPassword(auth, e, p); await setDoc(doc(db, "users", r.user.uid), { username: n, email: e, balance: 20, activePackages: [] }); }
            toggleM('modal');
        };

        onAuthStateChanged(auth, u => {
            if(u) {
                document.getElementById('dashboard').classList.remove('hidden'); document.getElementById('login-nav').classList.add('hidden');
                if(u.email === "admin@bdfx.com") { document.getElementById('admin-btn').classList.remove('hidden'); loadA(); }
                onSnapshot(doc(db, "users", u.uid), d => {
                    const data = d.data(); document.getElementById('user-balance').innerText = data.balance;
                    document.getElementById('profile-email').innerText = data.email;
                    if(data.activePackages?.length > 0) document.getElementById('claim-btn').classList.remove('hidden');
                });
                onSnapshot(collection(db, "packages"), s => {
                    let h = ""; s.forEach(p => { h += `<div onclick="buyP('${p.data().name}',${p.data().price},${p.data().daily})" class="pkg-card p-5 text-center"><h4 class="text-[10px] font-bold mb-1">${p.data().name}</h4><p class="text-cyan-400 text-[9px]">৳${p.data().price}</p></div>`; });
                    document.getElementById('shop-list').innerHTML = h;
                });
                onSnapshot(query(collection(db, "withdrawals"), where("uid", "==", u.uid)), s => {
                    let h = "", i = 1; s.forEach(w => { h += `<tr><td>${i++}</td><td>৳${w.data().amount}</td><td class="text-cyan-400">${w.data().status}</td><td>${w.data().date?.toDate().toLocaleDateString() || ''}</td></tr>`; });
                    document.getElementById('user-history-body').innerHTML = h;
                });
            }
        });

        window.buyP = async (n, p, d) => {
            const r = doc(db, "users", auth.currentUser.uid); const u = (await getDoc(r)).data();
            if(u.balance < p) return alert("Low Balance");
            await updateDoc(r, { balance: u.balance - p, activePackages: [...u.activePackages, { name: n, daily: d }] });
        };

        window.claimProfit = async () => {
            const r = doc(db, "users", auth.currentUser.uid); const u = (await getDoc(r)).data();
            let t = 0; u.activePackages.forEach(p => t += p.daily);
            await updateDoc(r, { balance: u.balance + t, lastClaim: serverTimestamp() });
        };

        window.subDep = async () => {
            await addDoc(collection(db, "deposits"), { uid: auth.currentUser.uid, amount: Number(document.getElementById('dep-amt').value), trx: document.getElementById('dep-trx').value, status: "Pending", date: serverTimestamp() });
            toggleM('deposit-modal');
        };

        window.subWdr = async () => {
            await addDoc(collection(db, "withdrawals"), { uid: auth.currentUser.uid, amount: Number(document.getElementById('w-amt').value), number: document.getElementById('w-num').value, status: "Pending", date: serverTimestamp() });
            toggleM('withdraw-modal');
        };

        function loadA() {
            onSnapshot(query(collection(db, "deposits"), where("status", "==", "Pending")), s => {
                let h = ""; s.forEach(d => { h += `<div class="glass p-3 flex justify-between text-[10px]"><span>${d.data().amount} - ${d.data().trx}</span><button onclick="appD('${d.id}','${d.data().uid}',${d.data().amount})" class="text-cyan-400">OK</button></div>`; });
                document.getElementById('adm-dep-list').innerHTML = h;
            });
        }
        window.appD = async (id, uid, a) => {
            const r = doc(db, "users", uid); const u = (await getDoc(r)).data();
            await updateDoc(r, { balance: u.balance + a }); await updateDoc(doc(db, "deposits", id), { status: "Accepted" });
        };
    </script>
</body>
</html>